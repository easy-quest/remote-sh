(this.webpackJsonpmycra=this.webpackJsonpmycra||[]).push([[5],{200:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAADTklEQVR4nO3cT0iTcRzH8c+zPz42VPIPudKQ0sprikjX6BIRRkRGKgkdhIESeOgQdAg6hCTMcIQEJsooE4sO0SG6VURERYeEDFKRZrGKqZtzj3s6VCJs5eaznu9jz+d1237Ps3153uz5MRgDiIiIiIiIiIjILpRsT3g98f4koPh1wPsvBtqsFCCUhN5ZV7tnLJvzHBt4K178NHTAq0Dpy/a8rAPw4v/V9mxP2MAngHLJZfQFkrqOj7MhzIW/A9DhLS1BVUU5HIqS0brdGQ4wNTuHmdCX1cfToc8AgF2V3ozW7c7wLSgU/pby3Kc1z623bnc52AP01BdVslm3N8MBvKUlKc9tKy3OeN3uDO8BVRXlAIBQ+CuAnxe8akd5xut2l/XN4NXEZOo9hVbtr63J6prye4AwBhDGAMIMb8LNp1tzMcemdTs4Yuh8fgKEMYAwBhDGAMIYQBgDCGMAYQwgjAGEMYAwBhDGAMIYQBgDCGMAYQwgjAGEiQWIBvqwUlMt9faWIRZAa2xANDiE2IXz0Evs+0Mt0VuQ7nQicfwY5sdHEW9vA/LckuOIsMYeUFiAeKcPC6NBJA4dlJ7GVNYI8EtyZyViVy4jOtCP5L690uOYQiyAx9cF5+SHtGtafR0WRgYRu3QRybIykyczl1gA1/MX8LS0I7+nF0okknqAw4HEkcNYvDuK5bPtZo9nGtFbkKJpyLt1BwVNJ6DeHAYSiZRjdM8WLPk6BKYzhyX2ACUyD/VaAAXNrXA/eiw9jqksEWAtXVWlRzCV4d+G5oJeVIjlM22It5wC3Pb6LiAaQHc6oTUdxZKvA3rx1rTHOKdnoPb6TZ7MPGIBtMYGxLvPYaV6d9p1JRZD3nAQ6uAQsJy6Of8vxAJEA3/4WwVdh/vBQ6j+fjjCYXOHEmCJPeA357sJqD29cL15u+6xkZfPcvreRfUHcvp6mbJEAEc4DPX6Dbjv3QeSSelxTCUaQNE0uMfGoQYGoCwuSo4iRiyA68lT5F/1wzE1LTWCJYgF8HR1Gzpf6p6da5b7Jmw3DCCMAYQxgDAGEMYAwhhAGAMIYwBhDCCMAYQxgDAGEMYAwhhAGAMIYwBh/OfcHOM/524yDCCMAYiIiIiIiIiIiEzyA97G0BQKex3zAAAAAElFTkSuQmCC"},259:function(e,t,a){"use strict";a.r(t);var n=a(108),r=a(101),c=a.n(r),l=a(102),i=a(1),o=a.n(i),u=a(103),s=a.n(u),m=a(18),d=a(249),f=a(256),h=a(262),b=a(248),E=a(245),p=a(246),A=a(243);function g(e){var t=e.open,a=e.handleSubmit,n=e.value,r=e.handleValueChange;return o.a.createElement(h.a,{open:t,"aria-labelledby":"form-dialog-title"},o.a.createElement(A.a,{id:"form-dialog-title"},"Authority Required"),o.a.createElement(E.a,null,o.a.createElement(p.a,null,"Please enter the access key. The access key will been automatically filled in if this is the first time you use the system.",o.a.createElement("br",null),o.a.createElement("br",null),"You can find this key at your server (PATH_TO_REMOTE_SH/access_key) if you forget."),o.a.createElement("input",{id:"username",hidden:!0,value:"admin"}),o.a.createElement(f.a,{value:n,autoFocus:!0,id:"password",onChange:function(e){r(e.target.value)},margin:"dense",label:"Access Key",fullWidth:!0})),o.a.createElement(b.a,null,o.a.createElement(d.a,{onClick:a,color:"primary"},"Submit")))}var C=a(258),v=a(255),k=a(250),w=a(251),y=a(252),O=a(244),j=a(253),S=a(200),R=a.n(S),I=Object(k.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},icon:{width:36,height:36}}}));function x(e){var t=e.onResetAccessKey,a=I(),n=Object(i.useCallback)((function(){window.open("https://github.com/yuri2peter/remote-sh/blob/master/README.md")}),[]);return o.a.createElement(w.a,{position:"static"},o.a.createElement(y.a,null,o.a.createElement(j.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"menu"},o.a.createElement("img",{className:a.icon,src:R.a,alt:""})),o.a.createElement(O.a,{variant:"h6",className:a.title},"Remote SH"),o.a.createElement(d.a,{onClick:n,color:"inherit"},"Help"),o.a.createElement(d.a,{onClick:t,color:"inherit"},"Reset Access Key")))}var z=a(254),M=a(264),D=a(208),G=a.n(D),V=a(209),Y=a.n(V),N=a(210),Q=a.n(N),B=a(206),K=a.n(B),T=a(211),P=a.n(T),H=a(201),J=a(100);function L(e){var t=e.open,a=e.handleSubmit,n=e.valueName,r=e.valueContent,c=e.handleValueNameChange,l=e.handleValueContentChange,i=e.handleCancel;return o.a.createElement(h.a,{onClose:i,open:t,"aria-labelledby":"form-dialog-title"},o.a.createElement(A.a,{id:"form-dialog-title"},"Edit Script"),o.a.createElement(E.a,null,o.a.createElement(f.a,{disabled:!c,variant:"outlined",value:n,onChange:function(e){c(e.target.value)},margin:"dense",label:"Name",fullWidth:!0}),o.a.createElement(f.a,{variant:"outlined",value:r,onChange:function(e){l(e.target.value)},multiline:!0,rows:12,margin:"dense",label:"Content",fullWidth:!0,spellCheck:!1})),o.a.createElement(b.a,null,o.a.createElement(d.a,{onClick:i},"Cancel"),o.a.createElement(d.a,{onClick:a,color:"primary"},"Submit")))}var U=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{},e.abrupt("return",s.a.post("".concat(m.a.urlServer).concat(t),a).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){var t=e.name,a=e.ak,r=e.onNeedFetchList,c=Object(i.useState)({content:"",sign:""}),l=Object(n.a)(c,2),u=l[0],s=l[1],d=Object(i.useState)(""),f=Object(n.a)(d,2),h=f[0],b=f[1],E=Object(i.useState)(!1),p=Object(n.a)(E,2),A=p[0],g=p[1],v=Object(i.useState)(!1),k=Object(n.a)(v,2),w=k[0],y=k[1],O=Object(i.useCallback)((function(){U("/script/read",{ak:a,name:t}).then((function(e){s(e),b(e.content)}))}),[a,t]);Object(i.useEffect)((function(){O()}),[O]);var S=Object(i.useCallback)((function(){b(u.content),g(!1)}),[u.content]),R=Object(i.useCallback)((function(){U("/script/write",{ak:a,name:t,content:h}).then((function(e){e.error?J.a.error(e.error):O(),g(!1)}))}),[a,h,t,O]),I=Object(i.useCallback)((function(){window.confirm("[Dangerous Operation] Are you sure to delete this file [".concat(t,"]?"))&&U("/script/remove",{ak:a,name:t}).then((function(e){r()}))}),[a,t,r]),x="".concat(m.a.urlServer,"/script/run/").concat(t,"/").concat(u.sign);return o.a.createElement(z.a,null,o.a.createElement(C.a,{display:"flex",height:328,flexDirection:"column",p:1},o.a.createElement(C.a,{display:"flex",alignItems:"center"},o.a.createElement(C.a,{flexGrow:1},t),o.a.createElement(C.a,null,w?o.a.createElement(M.a,{title:"back to code preview",arrow:!0},o.a.createElement(j.a,{size:"small",onClick:function(){y(!1)}},o.a.createElement(K.a,{fontSize:"small"}))):o.a.createElement(M.a,{title:"run",arrow:!0},o.a.createElement(j.a,{size:"small",onClick:function(){y(!0)}},o.a.createElement(G.a,{fontSize:"small"}))),o.a.createElement(M.a,{title:"copy trigger URL",arrow:!0},o.a.createElement(H.CopyToClipboard,{text:x,onCopy:function(){return J.a.success("Trigger URL Copied!")}},o.a.createElement(j.a,{size:"small"},o.a.createElement(Y.a,{fontSize:"small"})))),o.a.createElement(M.a,{title:"edit",arrow:!0},o.a.createElement(j.a,{disabled:w,size:"small",onClick:function(){return g(!0)}},o.a.createElement(Q.a,{fontSize:"small"}))),o.a.createElement(M.a,{title:"delete",arrow:!0},o.a.createElement(j.a,{disabled:w,size:"small",onClick:I},o.a.createElement(P.a,{fontSize:"small"}))))),o.a.createElement(C.a,{m:1,border:"1px solid #dcdcdc",flexGrow:1,p:1,fontSize:12,color:"gray",borderRadius:4,overflow:"auto"},w?o.a.createElement("iframe",{style:{border:"none",width:"100%",height:"calc(100% - 4px)"},src:x,title:"Running ".concat(t)}):o.a.createElement("code",{style:{whiteSpace:"break-spaces"}},u.content))),o.a.createElement(L,{open:A,valueName:t,valueContent:h,handleValueContentChange:b,handleSubmit:R,handleCancel:S}))},W=a(212),X=a.n(W),Z=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{},e.abrupt("return",s.a.post("".concat(m.a.urlServer).concat(t),a).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){var t=e.ak,a=e.onNewScriptCreated,r=Object(i.useState)("new.sh"),c=Object(n.a)(r,2),l=c[0],u=c[1],s=Object(i.useState)("#!/bin/sh\n\n"),m=Object(n.a)(s,2),d=m[0],f=m[1],h=Object(i.useState)(!1),b=Object(n.a)(h,2),E=b[0],p=b[1],A=Object(i.useCallback)((function(){u("new.sh"),f("#!/bin/sh\n\n"),p(!1)}),[]),g=Object(i.useCallback)((function(){Z("/script/write",{ak:t,name:l,content:d}).then((function(e){e.error?J.a.error(e.error):a(),A()}))}),[t,d,l,a,A]);return o.a.createElement(z.a,null,o.a.createElement(C.a,{height:312,p:2},o.a.createElement(C.a,{onClick:function(){return p(!0)},style:{cursor:"pointer"},display:"flex",alignItems:"center",fontSize:86,justifyContent:"center",height:"100%",border:"1px dashed #dcdcdc",borderRadius:4},o.a.createElement(X.a,{color:"action",fontSize:"inherit"}))),o.a.createElement(L,{open:E,valueName:l,valueContent:d,handleValueNameChange:u,handleValueContentChange:f,handleSubmit:g,handleCancel:A}))},_=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{},e.abrupt("return",s.a.post("".concat(m.a.urlServer).concat(t),a).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){var t=e.ak,a=e.onAkChanged,r=Object(i.useState)([]),c=Object(n.a)(r,2),l=c[0],u=c[1],s=Object(i.useCallback)((function(){_("/script/list",{ak:t}).then(u)}),[t]),m=Object(i.useCallback)((function(){window.confirm("[Dangerous Operation] Are you sure to reset the access key? The previous trigger URL and access key will be disabled.")&&_("/ak/reset",{ak:t}).then((function(e){var t=e.newAK,n=e.error;n?alert(n):(alert("Access key has been reset."),a(t))}))}),[t,a]);return Object(i.useEffect)((function(){s()}),[s]),o.a.createElement(C.a,{height:"100vh",display:"flex",flexDirection:"column"},o.a.createElement(x,{onResetAccessKey:m}),o.a.createElement(C.a,{flexGrow:1,p:2,bgcolor:"#f5f5f5"},o.a.createElement(v.a,{container:!0,spacing:2},o.a.createElement(v.a,{item:!0,xs:12,sm:6,md:3,lg:2},o.a.createElement(q,{ak:t,onNewScriptCreated:s})),l.map((function(e){return o.a.createElement(v.a,{key:e,item:!0,xs:12,sm:6,md:3,lg:2},o.a.createElement(F,{ak:t,name:e,onNeedFetchList:s}))})))))},ee=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{},e.abrupt("return",s.a.post("".concat(m.a.urlServer).concat(t),a).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=function(){var e=Object(i.useState)(!1),t=Object(n.a)(e,2),a=t[0],r=t[1],c=Object(i.useState)(""),l=Object(n.a)(c,2),u=l[0],s=l[1],m=Object(i.useState)(!1),d=Object(n.a)(m,2),f=d[0],h=d[1];Object(i.useEffect)((function(){ee("/ak/reset").then((function(e){e.error||s(e.newAK),r(!0)}))}),[]);var b=Object(i.useCallback)((function(){ee("/ak/verify",{ak:u}).then((function(e){e.match?(h(!0),r(!1)):J.a.error(e.error||"Invalid access key.",{position:"top-center"})}))}),[u]),E=Object(i.useCallback)((function(e){h(!1),s(e),r(!0)}),[]);return o.a.createElement(C.a,null,o.a.createElement(g,{open:a,value:u,handleValueChange:s,handleSubmit:b}),f&&o.a.createElement($,{ak:u,onAkChanged:E}))}}}]);
//# sourceMappingURL=5.561a3e26.chunk.js.map